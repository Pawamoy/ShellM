#!/bin/bash

## \brief delete a file or a directory in your shellm/usr/bin directory
## \require coreutils

include core/shellman.sh
include core/init/data.sh

[ $# -eq 0 ] && usage

main() {
  case $1 in
    ## \option -p, --purge
    ## Also delete the DATADIR in shellm data
    -p|--purge)
      PURGE=true
      shift
      if [ $# -eq 0 ]; then
        echo "del: no file name specified" >&2
        exit 2
      fi
    ;;
    ## \option -h, --help
    ## Prints this help and exit
    -h|--help) shellman -t "$0"; exit 0 ;;
  esac

  $PURGE && rm -rf "$DATADIR/$1" 2>/dev/null
  if [ -e "$shellm/usr/bin/$1" ]; then
    rm -rf "$shellm/usr/bin/$1"
  else
    echo "del: $1: no such file or directory in shellm/bin" >&2
    exit 1
  fi
}

## \usage del [-p] FILE|DIR
main "$@"
