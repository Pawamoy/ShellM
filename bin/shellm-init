#!/bin/bash

## \brief Initialize a shellm directory.

include core/shellman.sh
include core/init/data.sh

[ $# -eq 0 ] && usage

main() {
  case $1 in
    ## \option -h, --help
    ## Prints this help and exit
    -h|--help) shellman "$0"; exit 0 ;;
  esac

  local d dir
  if [ $# -eq 0 ]; then
    dir="${PWD}"
  else
    dir="$1"
    if [ ! -d "${dir}" ]; then
      mkdir -p "${dir}" || return 1
    fi
  fi
  cp -ir "${SHELLM_ROOT}/initbase"/* "${dir}"
  for d in bin data man/man1 man/man3; do
    mkdir -p "${dir}/$d"
  done
}

## \usage shellm-init [PATH]
main "$@"
